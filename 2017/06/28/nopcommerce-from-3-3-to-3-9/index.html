<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="Loving code ,especially javascript, React Native" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    nopcommerce from 3.3 to 3.9 |  Bunny&#39;s  Code Burrow
  </title>
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">  <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">  <script src="/js/pace.min.js"></script>

  
  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-nopcommerce-from-3-3-to-3-9" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  nopcommerce from 3.3 to 3.9
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/06/28/nopcommerce-from-3-3-to-3-9/" class="article-date">
  <time datetime="2017-06-28T04:06:17.000Z" itemprop="datePublished">2017-06-28</time>
</a>
      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="update-nopcommerce"><a href="#update-nopcommerce" class="headerlink" title="update nopcommerce"></a>update nopcommerce</h1><p>update nopcommerce from 3.3-3.9<br>Here is the steps to update</p>
<ol>
<li><p>download form nop</p>
</li>
<li><p><strong>unblock</strong> the zar for window securtiy issue,if not, there wil be problems when releasing</p>
</li>
<li>Extract files</li>
<li>setup by: run NopCommerce.sln, clean and rebuild</li>
<li>view in chrome</li>
<li>you will see the installation page: input your local database and choose to create one database, it doesn’t matter, because you will rewrite it later, but it seems that you cannot skip the initial part</li>
<li>open nop.web/app_data/setting.txt</li>
<li>change the database to your own one. make sure the version of you database is same with the source code. if it is not ,you should download the update.sql from nopcommerce and run it one by one: 3.3-3.4, 3.4-3.5. when you run it, make sure you open the microsoft sql server and click the target database you want to update</li>
<li><p>copy the original theme from v3.3 to 3.9, choose the new theme from backend of website, then you will notice  the difference ,what we are supposed to do is address them one by one:</p>
</li>
<li><p>solve the problem of responsive by go to the nop.web/views/shared/_Root.cshtml</p>
</li>
</ol>
<pre><code>@{
    Layout = &quot;~/Views/Shared/_Root.Head.cshtml&quot;;
}
@Html.Widget(&quot;body_start_html_tag_after&quot;)
@Html.Partial(&quot;_Notifications&quot;)
@Html.Action(&quot;JavaScriptDisabledWarning&quot;, &quot;Common&quot;)
@Html.Partial(&quot;OldInternetExplorerWarning&quot;)

&lt;div class=&quot;master-wrapper-page&quot;&gt;
    @Html.Action(&quot;AdminHeaderLinks&quot;, &quot;Common&quot;)

    &lt;div class=&quot;master-wrapper-content&quot;&gt;
    @Html.Partial(&quot;Header&quot;)
    &lt;script type=&quot;text/javascript&quot;&gt;
        AjaxCart.init(false, &apos;.header-links .cart-qty&apos;, &apos;.header-links .wishlist-qty&apos;, &apos;#flyout-cart&apos;);
    &lt;/script&gt;
    &lt;div class=&quot;header-menu&quot;&gt;
        @Html.Action(&quot;TopMenu&quot;, &quot;Catalog&quot;)
    &lt;/div&gt;
        @Html.Widget(&quot;content_before&quot;)
        &lt;div class=&quot;master-wrappermain&quot;&gt;

           &lt;div class=&quot;master-wrapper-main clearfix&quot;&gt;
            @if (IsSectionDefined(&quot;Breadcrumb&quot;))
                {
                    @RenderSection(&quot;Breadcrumb&quot;) 
                }
             @RenderBody()
            &lt;/div&gt;
        &lt;/div&gt;
        @Html.Widget(&quot;content_after&quot;)
    &lt;/div&gt;
    @Html.Action(&quot;Footer&quot;, &quot;Common&quot;)
&lt;/div&gt;
@Html.Action(&quot;EuCookieLaw&quot;, &quot;Common&quot;)
@Html.Widget(&quot;body_end_html_tag_before&quot;)
</code></pre><ol>
<li><p>modify for the slider by go to the nop.web\Plugins\Nop.Plugin.Widgets.NivoSlider\Content\nivoslider\themes\custom</p>
<pre><code>@media all and (min-width: 1001px) {
.theme-custom {
/*margin: -30px 0 60px;*/
}
</code></pre></li>
<li><p>go to the views/common/footer.cshtml,update as below:</p>
<pre><code>@model FooterModel
@using Nop.Core
@using Nop.Core.Domain.Tax
@using Nop.Core.Infrastructure
@using Nop.Web.Models.Common;

&lt;div class=&quot;footer&quot;&gt;
    &lt;div class=&quot;footer-menu-wrapper&quot;&gt;
        &lt;div class=&quot;column information&quot;&gt;

        &lt;h3&gt;@T(&quot;Footer.Information&quot;)&lt;/h3&gt;
        &lt;ul&gt;
</code></pre></li>
</ol>
<pre><code>        @if (Model.SitemapEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Sitemap&quot;)&quot;&gt;@T(&quot;Sitemap&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Topic&quot;, new {SeName = Html.GetTopicSeName(&quot;shippinginfo&quot;) })&quot;&gt;@T(&quot;ShippingReturns&quot;)&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Topic&quot;, new {SeName = Html.GetTopicSeName(&quot;privacyinfo&quot;) })&quot;&gt;@T(&quot;PrivacyNotice&quot;)&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Topic&quot;, new {SeName = Html.GetTopicSeName(&quot;conditionsofuse&quot;) })&quot;&gt;@T(&quot;ConditionsOfUse&quot;)&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Topic&quot;, new {SeName = Html.GetTopicSeName(&quot;aboutus&quot;) })&quot;&gt;@T(&quot;AboutUs&quot;)&lt;/a&gt;&lt;/li&gt;




        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;ContactUs&quot;)&quot;&gt;@T(&quot;ContactUs&quot;)&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;column customer-service&quot;&gt;

    &lt;h3&gt;@T(&quot;Footer.CustomerService&quot;)&lt;/h3&gt;
    &lt;ul&gt;


        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;ProductSearch&quot;)&quot;&gt;@T(&quot;Search&quot;)&lt;/a&gt; &lt;/li&gt;
        @if (Model.NewsEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;NewsArchive&quot;)&quot;&gt;@T(&quot;News&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.BlogEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Blog&quot;)&quot;&gt;@T(&quot;Blog&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.ForumEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Boards&quot;)&quot;&gt;@T(&quot;Forum.Forums&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.RecentlyViewedProductsEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;RecentlyViewedProducts&quot;)&quot;&gt;@T(&quot;Products.RecentlyViewedProducts&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.CompareProductsEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;CompareProducts&quot;)&quot;&gt;@T(&quot;Products.Compare.List&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.NewProductsEnabled)

        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;NewProducts&quot;)&quot;&gt;@T(&quot;Products.NewProducts&quot;)&lt;/a&gt;&lt;/li&gt;
        }




    &lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;column my-account&quot;&gt;

    &lt;h3&gt;@T(&quot;Footer.MyAccount&quot;)&lt;/h3&gt;
    &lt;ul&gt;


        &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;CustomerInfo&quot;)&quot; class=&quot;account&quot;&gt;@T(&quot;Account.MyAccount&quot;)&lt;/a&gt;&lt;/li&gt;
        @if (!Model.HideOrders)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;CustomerOrders&quot;)&quot;&gt;@T(&quot;Account.CustomerOrders&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (!Model.HideAddresses)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;CustomerAddresses&quot;)&quot; class=&quot;&quot;&gt;@T(&quot;Account.CustomerAddresses&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.ShoppingCartEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;ShoppingCart&quot;)&quot; class=&quot;ico-cart&quot;&gt;@T(&quot;ShoppingCart&quot;)&lt;/a&gt;&lt;/li&gt;
        }
        @if (Model.WishlistEnabled)
        {
            &lt;li&gt;&lt;a href=&quot;@Url.RouteUrl(&quot;Wishlist&quot;)&quot; class=&quot;ico-wishlist&quot;&gt;@T(&quot;Wishlist&quot;)&lt;/a&gt;&lt;/li&gt;
        }
    &lt;/ul&gt;
        &lt;/div&gt;
        &lt;div class=&quot;column follow-us&quot;&gt;
              &lt;div class=&quot;social&quot;&gt;
                &lt;div class=&quot;title&quot;&gt;
                    &lt;strong&gt;@T(&quot;Footer.FollowUs&quot;)&lt;/strong&gt;
                &lt;/div&gt;
                @Html.Action(&quot;Social&quot;, &quot;Common&quot;)
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer-poweredby&quot;&gt;
        Powered by &lt;a href=&quot;http://www.nopcommerce.com/&quot;&gt;nopCommerce&lt;/a&gt;
        @*Would you like to remove the &quot;Powered by nopCommerce&quot; link in the bottom of the footer?
            Find more info here http://www.nopcommerce.com/copyrightremoval.aspx*@

    &lt;/div&gt;

    @if (Model.DisplayTaxShippingInfoFooter)
    {
        var inclTax = EngineContext.Current.Resolve&lt;IWorkContext&gt;().TaxDisplayType == TaxDisplayType.IncludingTax;
        &lt;div class=&quot;footer-tax-shipping&quot;&gt;
            @T(inclTax ? &quot;Footer.TaxShipping.InclTax&quot; : &quot;Footer.TaxShipping.ExclTax&quot;, Url.RouteUrl(&quot;Topic&quot;, new {SeName = Html.GetTopicSeName(&quot;shippinginfo&quot;)}))
        &lt;/div&gt;

    }
    &lt;div class=&quot;footer-disclaimer&quot;&gt;
        @T(&quot;Content.CopyrightNotice&quot;, DateTime.Now.Year, Model.StoreName)
    &lt;/div&gt;


    &lt;div class=&quot;footer-store-theme&quot;&gt;
        @Html.Action(&quot;StoreThemeSelector&quot;, &quot;Common&quot;)
    &lt;/div&gt;

    @Html.Widget(&quot;footer&quot;)
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function () {
        $(&apos;.footer-block .title&apos;).click(function () {
            var e = window, a = &apos;inner&apos;;
            if (!(&apos;innerWidth&apos; in window)) {
                a = &apos;client&apos;;
                e = document.documentElement || document.body;
            }
            var result = { width: e[a + &apos;Width&apos;], height: e[a + &apos;Height&apos;] };
            if (result.width &lt; 769) {
                $(this).siblings(&apos;.list&apos;).slideToggle(&apos;slow&apos;);
            }
        });
    });
&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function () {
        $(&apos;.block .title&apos;).click(function () {
            var e = window, a = &apos;inner&apos;;
            if (!(&apos;innerWidth&apos; in window)) {
                a = &apos;client&apos;;
                e = document.documentElement || document.body;
            }
            var result = { width: e[a + &apos;Width&apos;], height: e[a + &apos;Height&apos;] };
            if (result.width &lt; 1001) {
                $(this).siblings(&apos;.listbox&apos;).slideToggle(&apos;slow&apos;);
            }
        });
    });
&lt;/script&gt;
</code></pre><p>meanwhile, go to the model/commom/FooterModel.cs modify as below:</p>
<pre><code>using System.Collections.Generic;
using Nop.Web.Framework.Mvc;

namespace Nop.Web.Models.Common
{
    public partial class FooterModel : BaseNopModel
    {
        public FooterModel()
        {
            Topics = new List&lt;FooterTopicModel&gt;();
        }
        public string FacebookLink { get; set; }
        public string TwitterLink { get; set; }
        public string YoutubeLink { get; set; }
        public string GooglePlusLink { get; set; }
        public string StoreName { get; set; }
        public bool WishlistEnabled { get; set; }
        public bool ShoppingCartEnabled { get; set; }
        public bool HideAddresses { get; set; }
        public bool HideOrders { get; set; }
        public bool SitemapEnabled { get; set; }
        public bool NewsEnabled { get; set; }
        public bool BlogEnabled { get; set; }
        public bool CompareProductsEnabled { get; set; }
        public bool ForumEnabled { get; set; }
        public bool RecentlyViewedProductsEnabled { get; set; }
        public bool NewProductsEnabled { get; set; }
        public bool AllowCustomersToApplyForVendorAccount { get; set; }
        public bool DisplayTaxShippingInfoFooter { get; set; }
        public bool HidePoweredByNopCommerce { get; set; }

        public int WorkingLanguageId { get; set; }

        public IList&lt;FooterTopicModel&gt; Topics { get; set; }

        #region Nested classes

        public class FooterTopicModel : BaseNopEntityModel
        {
            public string Name { get; set; }
            public string SeName { get; set; }

            public bool IncludeInFooterColumn1 { get; set; }
            public bool IncludeInFooterColumn2 { get; set; }
            public bool IncludeInFooterColumn3 { get; set; }
        }

        #endregion
    }
}
</code></pre><ol>
<li><p>go to the model/commom/ContactUsModel.cs        </p>
<pre><code>using System.Web.Mvc;
using FluentValidation.Attributes;
using Nop.Web.Framework;
using Nop.Web.Framework.Mvc;
using Nop.Web.Validators.Common;

namespace Nop.Web.Models.Common
{
[Validator(typeof(ContactUsValidator))]
public partial class ContactUsModel : BaseNopModel
{
[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Email&quot;)]
public string Email { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Subject&quot;)]
public string Subject { get; set; }
public bool SubjectEnabled { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Enquiry&quot;)]
public string Enquiry { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.FullName&quot;)]
public string FullName { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Business&quot;)]
public string Business { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Department&quot;)]
public string Department { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Phone&quot;)]
public string Phone { get; set; }

[AllowHtml]
[NopResourceDisplayName(&quot;ContactUs.Mobile&quot;)]
public string Mobile { get; set; }

public bool SuccessfullySent { get; set; }
public string Result { get; set; }

public bool DisplayCaptcha { get; set; }
    }
}
</code></pre></li>
</ol>

      
      <!-- 打赏 -->
      
        <div class="page-reward">
          <a href="javascript:void(0);" class="page-reward-btn tooltip-top" target="_self">
            <div class="tooltip tooltip-east">
              <span class="tooltip-item">
                赏
              </span>
              <span class="tooltip-content">
                <span class="tooltip-text">
                  <span class="tooltip-inner">
                    <p class="reward-p"><i class="icon icon-quo-left"></i>请我喝杯咖啡吧~<i
                        class="icon icon-quo-right"></i></p>
                    <div class="reward-box">
                      
                      <div class="reward-box-item">
                        <img class="reward-img" src="/images/alipay.jpg">
                        <span class="reward-type">支付宝</span>
                      </div>
                      
                      
                      <div class="reward-box-item">
                        <img class="reward-img" src="/images/wechat.jpg">
                        <span class="reward-type">微信</span>
                      </div>
                      
                    </div>
                  </span>
                </span>
              </span>
            </div>
          </a>
        </div>
        
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/28/nopcommerce-from-3-3-to-3-9/" data-id="ck40g2kd1005t2ols3o2o7ibx"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nopcommerce/">nopcommerce</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2017/06/06/ubuntu-cmd/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            ubuntu cmd
          
        </div>
      </a>
    
    
      <a href="/2017/08/31/how-to-upload-app-to-ios-app-store/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">how to upload app to ios app store</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: false,
        app_id: 'chaSYi8FMdJBwzIBpxeNjqWC-gzGzoHsz',
        app_key: 'PqqkLYgPkHvH1BmyQqySWnSK',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    
    <aside class="sidebar">
      
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Bunny&#39;s  Code Burrow"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">目录</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/旅行/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Suche">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/tocbot.min.js"></script>
  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>


<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<script src="/js/ayer.js"></script>


  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  </div>
</body>

</html>